# 飲食店CSV読み込み点検ログ

## 点検日時
- 2025-09-27

## 点検内容
- リポジトリ内の `data/` と `public/data/` を確認し、`飲食店_吹田.csv` と `飲食店_豊中.csv` が両方に存在することを確認。
- アプリ側の読み込み処理を確認し、飲食店データは以下の優先順で読み込むことを確認。
  1. `飲食店_吹田_緯度経度付き.csv` / `飲食店_豊中_緯度経度付き.csv`
  2. `飲食店_吹田.csv` / `飲食店_豊中.csv`

## 判明した原因候補
- `飲食店_*_緯度経度付き.csv` が存在しない場合、Web サーバの SPA フォールバックで **HTML（index.html）を 200 で返す**ケースがあり、これが CSV として誤って読み込まれる可能性がありました。
- その結果、緯度経度取得後にダウンロードされる CSV の中身が HTML になる問題が再現し得ます。

## 対応内容
- 飲食店CSV読み込み時に **HTML が返ってきた場合はエラー扱い**にして、必ず `飲食店_吹田.csv` / `飲食店_豊中.csv` にフォールバックするように修正。
- あわせて、飲食店CSVのヘッダー（`店の名前` と `住所`）を簡易検証し、不正な内容の場合は読み込みエラーとして扱うようにしました。

## 補足
- GitHub Pages などの静的ホスティング環境では、存在しないパスに対して `index.html` が返ることがあるため、
  **CSV の配置先は `public/data/` を必ず更新**してください。
